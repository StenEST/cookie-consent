___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Cookie Consent",
  "brand": {
    "id": "68publishers",
    "displayName": "WideWise",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0CAYAAADL1t+KAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABksSURBVHgB7d1dj1VVmsDx5QyQiAmUQQ1K05T0CImYUCQDmeBFlYl2Mt0X4MVczBXwCcRPAHwC8XKukFvnQpiLmWR6EouLdpKmE4oESNAECxlpwksszAg9Yto5zylPU2AV1Mt5Wfs5v19SKfpVqLPZ/73WXnvtZ8rpj38sAECj/U0BABpP0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASWFUAnmBk9eoytn6kjK0bKTt/+j6yek3734+v+cw8eFCe/49TBegfQQd+ZnTtc+XA5tEyseHFMvHCi2WpFgo9vROf2di69e3vW9aunb3oWrVm3s9i+v535eq979oXXlPfzpSpuzPtX9Nsgg60xYl//8ZNsyFfRsTpr/iMxje81L7oihmUpV1E/fzzjaBP3r5Vzty5WSbv3GpHnmYRdBhyEYL3tm4rh7e+ZmRduYh4XHDFhVe3P6v2Bd3Lr7S/wnRrBB+BP/k/0+3v1O+ZcvrjHwswlPZvfKV88Mau1jTt2tJtz/zbvxZWroYLroj7scuX2iP3+DV1MkKHIRT3WU+M7Ta1XrH4jI5se70c/OVoGbT28bJrd/vXH301XY59fknYKyToMGRiVH5i1x7T65WqKeTzid9XfB1tjdhPXpsW9op4Dh2GyJHtO8one97secytmF6e+HzOjb9TbcznOrr99fLp3vFysHVPnzoYocOQiCn2foXCqG1pYpV6fD7xvUk6U/GxUO/Q1Fmf+4AZoUNyMRrv96hv5sH3hcWJBW/x+TQt5nPFWoz2MWa0PlBG6JDcibE9fY/F9P17hSeLC61Pdr+ZZmFi/HlitL5z3Uh5/+JUof+M0CGxD94Y++tzxf103qYkTxRT1efGf53yKYPDv3qtPVqPPyP9JeiQVCywimeXByG2E2V+MVvy6d6Jnjz7X4vZP+O4qPeZoENCcUKNVciDMjUj6PMZhph3RMxFvb8EHZKJE2jcmx2Uyds3y8wPHlt7XCfmw/T8v6j3l6BDMu+1ptkHOQI8feN64VGzYRuumHeIev8IOiQSJ81B3TfvOCXojxjmmHfMzhrtLSOr7E7YS4IOicTmJIMU0+02F3lUhGwY7pk/TdxyiKcu6B1BhyTiEahBPwZ18trVwkPxpEGTN4zpttjc6PDWbYXeEHRI4si2HWWQYmT+0bXpwqzYNW2QTxrU6kjrZzK2zkVOLwg6JBD3KAc9Oo/3ZTOr/ca07YO9wKpVZ0c5uk/QIYF43eYgGZ0/Kj4P980XNuh9ErISdEhg4oWXyiAZnT8UsWrC608HLV5K41G27hJ0aLiYah/kaDBG5kbnDw1yU58mian3Qc8sZSPo0HD7N/b/5SsdMdVudP5QLIQz1b54MZOR8QU1gyLo0HA71z1fBiVi7rnzhyyEW7pBP52RiaBDww1qhHPs8kVT7XMYnS9PHL+e1e8OQYcGG9SJ8ORX0+WoqfZHHGgFneU5uHlLYeUEHRps9Nn+jwgj5genzhYeqmEfgCY7sPlV+7x3gaBDg/X7sR8xn5/V2isTK9496rdygg4N1s83eH145XMxX8Cg9wHIYN/GTYWVEXRosH6N0N+/MFUOXzhf+LlB7wOQRfwcTbuvjKADC4pH0t76bLIcv/JFYX6D3Acgm/0v+1muhKAD84op9l1nflcmb98qLGyQ+wBkM+7WxYqsKgBzTN6+WY59fknIFyHWMFjd3j0TG/wsV0LQgTYhXzobonRXrAmJ++gzPzwoLJ2gwxCbefCgPbV+6sb1MnV3prA0Y+sEvdtixiOOR5ZO0GGIRMCn7n5Tzty5VSbjy2h8RcYbMkXc2W+/Ca8r9UrV5RN0aLAI8o9P+M+vtk7kEfHp+9+1Qn7Xi1S6bGT1mlKrzi2UmHmJYyDEPf/9Gze1XyJT66N2O93GWDZBhwbzLvLBqnU0GS/OmW+v/Qh7HC+nbnxdju8YKwcq3J3t+YovkmrnsTWAZapxlBtrIp724pwIe+z6V+Mtl53r1heWR9ABlqGf2+4uVtxSWcpb8A7ZyjcVQQdYhhrvn8dCx8798sWIC4DaRukWxS2foAMkcXIZ6ylOt+6nk4NFcQBDbHaUfrPQfIIOMMRiExcbueRgyh0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEjA61OhAUbXPldGVq8uo8+ubX1f0/51fM01fe9emXnwfZn54UH71/Gea2B4CDpUJuK9f+MrZef6kTK2buSvMV+Oqbsz7bifuXOzTH07UyZv3ypAToIOAxax3r9xUxl/4cX29+XGez5jcVHQ+tr/8ivtfz3z4EE76qdvfF0m79wyiodEBB0GZKIV8CPbdrSD282IP0n74qEV907gI+4nr02XU63AR+yB5hJ06KMI6ntbt5XDW1/rW8SfJC4q2hcW915vx/3Y55eM2qGhBB36oLaQPy7u0x/8ZXyNlo++mhZ2aCBBhx6qPeTziagLOzSPoDfQl2//ttTk/QvnWvdgrxceFSvVP3hjV2v0u7Y0UUR9/8ubyvErX5Rjly8WoG6C3kC1BaIpI89+ienrE2O72/emmy4+26PbXy8HN28pb312xmgdKmanOOiiGJWfG38nRczniouUL9/+TTmyfUcB6iTo0CUfvDFWPtnzZuoZixitf7L7zXbggboIOqxQBPzTvRPthW/DIJ5h/3TvuKhDZQQdViCidm781+mm2J8m/twR9diaFqiDoMMyzUZtorGr2FeqfTEz8U45sHm0AIMn6LAMwx7zuT7atVvUoQKCDksk5j8n6jB4gg5LIOYLO/7GmHvqMECCDovUWc0u5vOLn88ne/Za/Q4DIuiwSB/sGBPzp+isfh9ZZfdA6DdBh0WIHdJib3OeLqIem+wA/SXo8BQRqNghjcWLi5/DW7cVoH8EHZ4i7puzdEdaF0Hup0P/CDo8QUy1u2++PLFILt46B/SHoMMCTLWvXGyJe9Dz6dAXgg4LsLCrO2Lq3ap36D1Bh3nEqDLebc7KxUzH4V8Nx5voYJAEHeYR987pnve2bjNKhx4TdHhMjM4thOuuWCBnlA69JejwGC8Z6Q2jdOgtQYc5xtaPtFdm030xSrfbHvSOoMMc771qWriX9m3cVIDeEHT4iRFk78XshxkQ6A1Bh5/sN3rsC48DQm8IOvxkn9D0xYHNrxag+wQdyux0+/6XjdD7IX7Wpt2h+wQdWiY2CEw/+XlD9wk6lNLIEePMgwdl+t537e9NM77hpQJ016oCNCYwk7dvlg+//KL1/dYjIY9p7HiGPna5iz9L7TvdxQVUbDIz80PzLkagVoLO0OvEsGYR8kNTf2yPyOcTcY/Ix1f7ZShb/669M1vNxkZG2r9foDtMuTP0ao/5+xemylufnVkw5o+L/97hC+db/5vJqqfjx9bV/XOHphF0hl7NYYmYH7/yRVmOGP3WHPWdlV9IQdMIOkOv1vvNxy5fXHbMO6buzpRD5/5QajT6rDfaQTcJOkNvy7PPldrEtPnRy5dKN5y6cb39VZu41w90j6Az9EZWrym1OdalmD/8/7tYaiPo0F2CztCrLSxxz/uja9Olm2LqvcYV5d6PDt0j6Ay9eGytJmfu9Ca8p298XWozsqa+2RFoKkFn6NUW9Km735ReWOxjb/1U288emkzQoTK9Cu/Ut3dLbQQdukfQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHWAZRlavLlATQWfFRlavKU3lpDxYI6ua+/Ov8diZefCgMLwEvYFq+0s7unZtaarRtc+V2kzfv1eGRZMvqGq8GBH04SboDVTbX9r1RuiNMPPg+1KbGi+oFqvJv3dyEvQGqu3EPLHhxdJUNf7ee3XBVuPobWz986Wpxis8dqbvfVcYXoLeQPVNuT/X2Huh4xteKrXp5ec7fa+u6fwao7hYtV2MmG5H0Bvo6v36rsL3v/xKaaKx9SOlNr0cZdU2uxO3PCZeaF7U4yK2trUjRucIegPV+Bd338ZflKbZv/GV6u6h9/qzPf/tTKlNE2/Z1Hmrpr41EvSXoDdQbdOmIUZZTZt237dxU6lNr4Ne40n/va3bStMc2b6j1KbGizX6S9AbaKrCv7gx0j38q9dKU8SU6cFfjpba9PqkPHX3bqlN06bd4/da46OaNV7o01+C3kC13iuLkVZTRulHtr1eatTrk3KNF4PhyLb6RrwLOfCL0VKjWj9b+kfQGyhWs9Z4Nd6UUXqto/PQ65NyrReDMeptwig9fo/VHjszgj7sBL2hzty5WWoUo/TaN9yodXQeJm/fKr0UF4NTd+s88Z8Y2139DM+JsT2lRvGZzvzgsbVhJ+gNVetJOUbpcWKu1cHNo9WOsCZv9+cirdaLwbgQrHGxWUf83mrd5vjqEG0XzMIEvaEm7/R2JLcSMS1Z44k5gvHBG2OlVv1apVzjwriOuGUTjxPWJo7po9vrndk59aevCwh6Q7Wn2CreGSpOfgdao+FaRMw/3TtR9d7tp25cL/1w6kbdJ/8Tu/aUsXX1bPgTx06tU+0dNV/g0z+C3mCnKz8xH2+Nhms4MUfEP9m9t/q3wvX6/nlHXAj265+1HO3Pa8/eKtZidC4Eaz52YqGjXeIIgt5gNZ+UQ5yYP31zYqAj9Tghnxv/dZVbvM51uk+j845a76N3zIZ0fKAXhE2IeTA6p0PQGyymTmt/IUNE/aNduwdyTz0i3oQTcuj3PdAmRKAd1NYF4eEB7CQX9/HPjb/TiGPn5LXpAkHQG6zmR5AeF/fUZ+Pan2nUuIBoygk59DuwMbvThGMnLgg/eGNn+8mJfhw7s/+8sdaU/5tVr7foiKn22mfq6B9Bb7hjn18sTRErhSOyvRytd/4ZNa9IflxMtw/iHmjtazDmikcNYwr+YA9v38T/d9yeOby1OVsYm25nrmfK6Y9/LDRWjCK+fPu3jRhNzBUBO3b5UvuE1I2YtR+V27ajka/ifPcPv+/bCve54pj55h/3l6bpHDsfdWGqOX4GEfJ4UU8Tj51X/+vfLYjjrwQ9gRiN1rwhx9Oc+tP19mhxKXGPE3HcI9/Xutd5cPOrjbug6Yg/b5yUByVugzQxZCFuOcXag86xs9j1JFmOndiI6K3PzhToEPQE4t7il2//pmQQgYuNT6bv/2+5O2fP+jjpxteW1p81Vj7Xvmp9sd6/cL4cv/J5GZSIeUQ9g1gTEMfLfMfOlrVrW9/XlIkNLzVmXcXTHDp3tiuzFOSxqtB4nYUxTR1pzRUXJ7XvBd9Ng97kpbM4LsMF0tj6PBd6TxN/58Wcx1kUl0STFscxK07INdz//PDKF4VmiTUE8DhBTyJGWh5faZZaTsqzFxZe7tEURucsRNATMUpvjlpG5x3HLjt2msLonIUIeiJG6c1R20nZKL0ZjM55EkFP5tDU2ULdYjRc47PDh6b+UKib0TlPIujJRCg+HOBjUDxZfD5HKz0pm+Gp29Tdb4zOeSJBTyiCYfq0TrWPsGKGp/YX/gyrd8/+d4EnEfSE4oRs+rQ+MbqqfYQ1u62qBXK1qfU2DXUR9KRi6tTUez06+483wfErX5h6r0jNt2moi6AnZuq9Hsfan0VzRlim3uthv3YWS9ATM/Veh5gpadpiJlPvdTDVzlIIenIxdfr+hanCYMTJ+PCF86WJYurdbZvBiYtAU+0shaAPgTgxn/xqutBfEfOmT5dGUOLlLfRXHDsuxFkqQR8Shy9OOTH32btnP2v8dGnctpn9c1iL0S+dC0FrGFgqQR8STsz9FaOrLBdQEZh3z/5eYPokw4UggyHoQ2T2yn/SibnHYiHT8WSvJI2Lk4g6vXXo3FkzaSyboA8ZUe+tiHnWhUyxwDKCQ2/ErI6tXVkJQR9CMQIQ9e7LHPOOCI6od1/GWR36T9CHVCfq7ql3xzDEvEPUuyt+lh5PoxsEfYiJencMU8w7Iuq7zvzOLM8KtDd+asXcNDvdIuhDrnNPXdSXrnNCHtbRVVwQRtQdO0vX+Xsn5nSToNM+uew685/lpJPLojkhz+r8HKzMXrzZmbEzfmZ03d+Wf/6no4Wh9+e//KWcunG9PNP69cQLLxUWNnn7ZvuEbGQ6K2Yq/uXqlfL86tXlH57fUFhYbKUbL7658X9/LtBtz5TTH/9YYI6x9SPlk91vltG1awuPikeLrEZe2MHNo+XI9h2OncfERY+V7PSaoDOv0bXPlaPbXy8HWidoZqeWY2TlPeFPF8fOibHdrZmeFwuzMzqHpv5o9zd6TtB5IiOuh88IW9G9NMN+7BiV02+CzlONtO6NHt76WvvkPExiZPX+xfMWL63AsM70xHqUuD1jVE4/CTqLNiwnZ9Pr3Tc7Df/36RdcxkXgsc8vOXYYCEFnybKenCPkxy5f8mxwD2WdhhdyaiDoLFuWEXucjE9euyrkfRQL5o5se73xF4VCTk0EnRXrhH18w0uNGnk5GQ9e59jZt3FTe61GE8Rit5PXvmzfJ3fsUBNBp6v2v/xK2d86Odd6go6In26diGM0btV6XWI6/sDmLdWO2h071E7Q6ZlO3Ac5co8T79Tdb5yIGyRG7RMbXiz7WsfPROvYGdSFYRwrk3daEf/T9dZo/GvHDtUTdPoidp8bWzfSvne6s/U9/nUvxMK2qW9nypnWVGh8j0fOnIibLY6VCPx469gZffa5nh47k3dulfOtYya+e1yRphF0BiZOzDFyj9DHKCxCH2KEFkZWr3lkdNZ5pjcCPfPg+zJ9/1652vr3Yk/1iHf85+KdXxwTcey0v7eOmS2t42X02dkZoM6x0/neMffYmb4/e5w4dshG0AEgAa9PBYAEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEgAUEHgAQEHQASEHQASEDQASABQQeABAQdABIQdABIQNABIAFBB4AEBB0AEhB0AEhA0AEggf8Hao27MlMs6ZMAAAAASUVORK5CYII\u003d"
  },
  "description": "Cookie Consent · See documentation \n\nForked from 68publishers-cookie-consnet",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "package_version",
    "displayName": "Package version",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "REGEX",
        "args": [
          "^latest$|^([\\d]{1}\\.[\\d]{1}\\.[\\d]{1})(?:(\\-beta|\\-alpha)\\.[\\d]+)?$"
        ]
      }
    ],
    "help": "The version of CookieConsentWrapper package. Must be a valid version in a format \u003ccode\u003ex.x.x\u003c/code\u003e or string \u003ccode\u003elates\u003c/code\u003e.",
    "defaultValue": "latest"
  },
  {
    "type": "CHECKBOX",
    "name": "force_consent",
    "checkboxText": "Make consent required",
    "simpleValueType": true,
    "defaultValue": false,
    "help": "Block page until action"
  },
  {
    "type": "CHECKBOX",
    "name": "autorun",
    "checkboxText": "Show the widget as soon as possible",
    "simpleValueType": true,
    "defaultValue": true,
    "help": "You need to manually call the CookieConsentWrapper.unwrap().show() method if you disable the option."
  },
  {
    "type": "CHECKBOX",
    "name": "hide_from_bots",
    "checkboxText": "Hide from bots",
    "simpleValueType": true,
    "defaultValue": false,
    "help": "Enable if you don\u0027t want the plugin to run when a bot/crawler/webdriver is detected."
  },
  {
    "type": "TEXT",
    "name": "revision",
    "displayName": "Revision",
    "simpleValueType": true,
    "valueHint": "Increment when new revision is required.",
    "defaultValue": 0,
    "valueValidators": [
      {
        "type": "NON_NEGATIVE_NUMBER"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "delay",
    "displayName": "Delay",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_NEGATIVE_NUMBER"
      }
    ],
    "defaultValue": 500,
    "valueUnit": "ms"
  },
  {
    "type": "GROUP",
    "name": "consent_modal_options",
    "displayName": "Consent modal options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "consent_modal_layout",
        "displayName": "Layout",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "box",
            "displayValue": "box"
          },
          {
            "value": "cloud",
            "displayValue": "cloud"
          },
          {
            "value": "bar",
            "displayValue": "bar"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "box",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "SELECT",
        "name": "consent_modal_position",
        "displayName": "Position",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "bottom left",
            "displayValue": "bottom - left"
          },
          {
            "value": "bottom right",
            "displayValue": "bottom - right"
          },
          {
            "value": "bottom center",
            "displayValue": "bottom - center"
          },
          {
            "value": "middle left",
            "displayValue": "middle - left"
          },
          {
            "value": "middle right",
            "displayValue": "middle - right"
          },
          {
            "value": "middle center",
            "displayValue": "middle - center"
          },
          {
            "value": "top left",
            "displayValue": "top - left"
          },
          {
            "value": "top right",
            "displayValue": "top - right"
          },
          {
            "value": "top center",
            "displayValue": "top - center"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "bottom center",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "SELECT",
        "name": "consent_modal_transition",
        "displayName": "Transition",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "zoom",
            "displayValue": "zoom"
          },
          {
            "value": "slide",
            "displayValue": "slide"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "zoom",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "SELECT",
        "name": "consent_modal_primary_button_role",
        "displayName": "Primary button role",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "accept_all",
            "displayValue": "Accept all"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "accept_all"
      },
      {
        "type": "SELECT",
        "name": "consent_modal_secondary_button_role",
        "displayName": "Secondary button role",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "settings",
            "displayValue": "Open settings"
          },
          {
            "value": "accept_necessary",
            "displayValue": "Accept necessary"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "settings"
      },
      {
        "type": "SELECT",
        "name": "consent_modal_buttons_order",
        "displayName": "Buttons order",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "primary_secondary",
            "displayValue": "Primary - Secondary"
          },
          {
            "value": "secondary_primary",
            "displayValue": "Secondary - Primary"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "primary_secondary"
      },
      {
        "type": "CHECKBOX",
        "name": "consent_modal_show_third_button",
        "checkboxText": "Show third button",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "Adds the third button to the consent modal. If the secondary button\u0027s role is \"Open settings\" the third button\u0027s role is \"Accept necessary\" and vice versa."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "settings_modal_options",
    "displayName": "Settings modal options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "settings_modal_layout",
        "displayName": "Layout",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "box",
            "displayValue": "box"
          },
          {
            "value": "bar",
            "displayValue": "bar"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "box"
      },
      {
        "type": "SELECT",
        "name": "settings_modal_position",
        "displayName": "Position",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "left",
            "displayValue": "left"
          },
          {
            "value": "right",
            "displayValue": "right"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "left",
        "help": "The position is applied only if the layout is set to \u003ccode\u003ebar\u003c/code\u003e."
      },
      {
        "type": "SELECT",
        "name": "settings_modal_transition",
        "displayName": "Transition",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "zoom",
            "displayValue": "zoom"
          },
          {
            "value": "slide",
            "displayValue": "slide"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "zoom"
      },
      {
        "type": "TEXT",
        "name": "modal_trigger_selector",
        "displayName": "Settings modal trigger selector",
        "simpleValueType": true,
        "help": "CSS selector that matches some element on your website. The element will be cloned and modified as a button that opens the cookie settings modal.\nThe option is ignored if the value is empty."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "cookies_options",
    "displayName": "Cookies options",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "cookie_name",
        "displayName": "Cookie name",
        "simpleValueType": true,
        "defaultValue": "cc-settings",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "help": "The name of a cookie value that holds information about the user\u0027s consent."
      },
      {
        "type": "TEXT",
        "name": "cookie_domain",
        "displayName": "Cookie domain",
        "simpleValueType": true,
        "help": "The domain name for the cookie that holds information about the user\u0027s consent, for example \".example.com\". \n\nIf the value is empty, it is automatically set in a browser using the \u003ccode\u003ewindow.location.hostname\u003c/code\u003e variable."
      },
      {
        "type": "TEXT",
        "name": "cookie_expiration",
        "displayName": "Cookie expiration",
        "simpleValueType": true,
        "defaultValue": 182,
        "valueUnit": "days",
        "valueValidators": [
          {
            "type": "POSITIVE_NUMBER"
          }
        ],
        "help": "How many days will be a cookie value valid."
      },
      {
        "type": "CHECKBOX",
        "name": "auto_clear_enabled",
        "checkboxText": "Enable cookies auto-clear",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "All cookies will be deleted based on the user\u0027s consent and a selected strategy if the option is enabled."
      },
      {
        "type": "SELECT",
        "name": "auto_clear_strategy",
        "displayName": "Cookies auto-clear strategy",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "clear_all_except_defined",
            "displayValue": "Clear all except defined"
          },
          {
            "value": "clear_defined_only",
            "displayValue": "Clear defined only"
          },
          {
            "value": "cookie_tables",
            "displayValue": "Use cookie tables"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "clear_all_except_defined",
        "enablingConditions": [
          {
            "paramName": "auto_clear_enabled",
            "paramValue": true,
            "type": "EQUALS"
          }
        ],
        "subParams": [
          {
            "type": "LABEL",
            "name": "label_clear_all_except_defined",
            "displayName": "All cookies except those you define below will be deleted when the user denies any storage.",
            "enablingConditions": [
              {
                "paramName": "auto_clear_strategy",
                "paramValue": "clear_all_except_defined",
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "LABEL",
            "name": "label_clear_defined_only",
            "displayName": "All cookies you defined below will be deleted when the user denies any storage.",
            "enablingConditions": [
              {
                "paramName": "auto_clear_strategy",
                "paramValue": "clear_defined_only",
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "LABEL",
            "name": "label_cookie_tables",
            "displayName": "Cookies for deletion are defined by cookie tables for each storage. The CMP application must be integrated for this strategy to work properly",
            "enablingConditions": [
              {
                "paramName": "auto_clear_strategy",
                "paramValue": "cookie_tables",
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "auto_clear_cookie_names",
        "displayName": "Cookie names",
        "simpleValueType": true,
        "textAsList": true,
        "enablingConditions": [
          {
            "paramName": "auto_clear_strategy",
            "paramValue": "clear_all_except_defined",
            "type": "EQUALS"
          },
          {
            "paramName": "auto_clear_strategy",
            "paramValue": "clear_defined_only",
            "type": "EQUALS"
          }
        ],
        "help": "One name per line.",
        "lineCount": 3
      },
      {
        "type": "CHECKBOX",
        "name": "use_rfc_cookie",
        "checkboxText": "Use RFC cookie",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "The cookie value will be encoded using the \u003ccode\u003eencodeURIComponent\u003c/code\u003e function (so the cookie value will be RFC compliant) if the option is enabled. Otherwise, the cookie will contain plain JSON."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "functionality_storage",
    "displayName": "Functionality storage",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "functionality_storage_visibility",
        "displayName": "Visibility and default state",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "visible_enabled",
            "displayValue": "Visible, Enabled by default"
          },
          {
            "value": "visible_readonly_enabled",
            "displayValue": "Visible \u0026 Readonly, Enabled by default"
          },
          {
            "value": "visible_disabled",
            "displayValue": "Visible, Disabled by default"
          },
          {
            "value": "hidden_synchronized",
            "displayValue": "Hidden, Synchronized"
          },
          {
            "value": "hidden_disabled",
            "displayValue": "Hidden, Disabled always"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "visible_readonly_enabled",
        "subParams": [
          {
            "type": "SELECT",
            "name": "functionality_storage_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "security_storage",
                "displayValue": "Security storage"
              },
              {
                "value": "personalization_storage",
                "displayValue": "Personalization storage"
              },
              {
                "value": "ad_storage",
                "displayValue": "Ad storage"
              },
              {
                "value": "ad_user_data",
                "displayValue": "Ad user data"
              },
              {
                "value": "ad_personalization",
                "displayValue": "Ad personalization"
              },
              {
                "value": "analytics_storage",
                "displayValue": "Analytics storage"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "functionality_storage_visibility",
                "paramValue": "hidden_synchronized",
                "type": "EQUALS"
              }
            ],
            "notSetText": "None",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "functionality_storage_show_again_expiration",
            "displayName": "If the storage is denied show the modal again after",
            "simpleValueType": true,
            "defaultValue": 0,
            "enablingConditions": [
              {
                "paramName": "functionality_storage_visibility",
                "paramValue": "visible_enabled",
                "type": "EQUALS"
              },
              {
                "paramName": "functionality_storage_visibility",
                "paramValue": "visible_disabled",
                "type": "EQUALS"
              }
            ],
            "valueUnit": "days",
            "valueValidators": [
              {
                "type": "NON_NEGATIVE_NUMBER"
              }
            ],
            "help": "Set the value to 0 if you want to disable the feature."
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "functionality_storage_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "68publishers_functionality_storage",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "security_storage",
    "displayName": "Security storage",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "security_storage_visibility",
        "displayName": "Visibility and default state",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "visible_enabled",
            "displayValue": "Visible, Enabled by default"
          },
          {
            "value": "visible_readonly_enabled",
            "displayValue": "Visible \u0026 Readonly, Enabled by default"
          },
          {
            "value": "visible_disabled",
            "displayValue": "Visible, Disabled by default"
          },
          {
            "value": "hidden_synchronized",
            "displayValue": "Hidden, Synchronized"
          },
          {
            "value": "hidden_disabled",
            "displayValue": "Hidden, Disabled always"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "visible_disabled",
        "subParams": [
          {
            "type": "SELECT",
            "name": "security_storage_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "functionality_storage",
                "displayValue": "Functionality storage"
              },
              {
                "value": "personalization_storage",
                "displayValue": "Personalization storage"
              },
              {
                "value": "ad_storage",
                "displayValue": "Ad storage"
              },
              {
                "value": "ad_user_data",
                "displayValue": "Ad user data"
              },
              {
                "value": "ad_personalization",
                "displayValue": "Ad personalization"
              },
              {
                "value": "analytics_storage",
                "displayValue": "Analytics storage"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "security_storage_visibility",
                "paramValue": "hidden_synchronized",
                "type": "EQUALS"
              }
            ],
            "notSetText": "None",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "security_storage_show_again_expiration",
            "displayName": "If the storage is denied show the modal again after",
            "simpleValueType": true,
            "defaultValue": 0,
            "enablingConditions": [
              {
                "paramName": "security_storage_visibility",
                "paramValue": "visible_enabled",
                "type": "EQUALS"
              },
              {
                "paramName": "security_storage_visibility",
                "paramValue": "visible_disabled",
                "type": "EQUALS"
              }
            ],
            "valueUnit": "days",
            "valueValidators": [
              {
                "type": "NON_NEGATIVE_NUMBER"
              }
            ],
            "help": "Set the value to 0 if you want to disable the feature."
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "security_storage_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "68publishers_security_storage",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "personalization_storage",
    "displayName": "Personalization storage",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "personalization_storage_visibility",
        "displayName": "Visibility and default state",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "visible_enabled",
            "displayValue": "Visible, Enabled by default"
          },
          {
            "value": "visible_readonly_enabled",
            "displayValue": "Visible \u0026 Readonly, Enabled by default"
          },
          {
            "value": "visible_disabled",
            "displayValue": "Visible, Disabled by default"
          },
          {
            "value": "hidden_synchronized",
            "displayValue": "Hidden, Synchronized"
          },
          {
            "value": "hidden_disabled",
            "displayValue": "Hidden, Disabled always"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "visible_disabled",
        "subParams": [
          {
            "type": "SELECT",
            "name": "personalization_storage_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "functionality_storage",
                "displayValue": "Functionality storage"
              },
              {
                "value": "security_storage",
                "displayValue": "Security storage"
              },
              {
                "value": "ad_storage",
                "displayValue": "Ad storage"
              },
              {
                "value": "ad_user_data",
                "displayValue": "Ad user data"
              },
              {
                "value": "ad_personalization",
                "displayValue": "Ad personalization"
              },
              {
                "value": "analytics_storage",
                "displayValue": "Analytics storage"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "personalization_storage_visibility",
                "paramValue": "hidden_synchronized",
                "type": "EQUALS"
              }
            ],
            "notSetText": "None",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "personalization_storage_show_again_expiration",
            "displayName": "If the storage is denied show the modal again after",
            "simpleValueType": true,
            "defaultValue": 0,
            "enablingConditions": [
              {
                "paramName": "personalization_storage_visibility",
                "paramValue": "visible_enabled",
                "type": "EQUALS"
              },
              {
                "paramName": "personalization_storage_visibility",
                "paramValue": "visible_disabled",
                "type": "EQUALS"
              }
            ],
            "valueUnit": "days",
            "valueValidators": [
              {
                "type": "NON_NEGATIVE_NUMBER"
              }
            ],
            "help": "Set the value to 0 if you want to disable the feature."
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "personalization_storage_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "68publishers_personalization_storage",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "ad_storage",
    "displayName": "Ad storage",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "ad_storage_visibility",
        "displayName": "Visibility and default state",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "visible_enabled",
            "displayValue": "Visible, Enabled by default"
          },
          {
            "value": "visible_readonly_enabled",
            "displayValue": "Visible \u0026 Readonly, Enabled by default"
          },
          {
            "value": "visible_disabled",
            "displayValue": "Visible, Disabled by default"
          },
          {
            "value": "hidden_synchronized",
            "displayValue": "Hidden, Synchronized"
          },
          {
            "value": "hidden_disabled",
            "displayValue": "Hidden, Disabled always"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "visible_disabled",
        "subParams": [
          {
            "type": "SELECT",
            "name": "ad_storage_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "functionality_storage",
                "displayValue": "Functionality storage"
              },
              {
                "value": "security_storage",
                "displayValue": "Security storage"
              },
              {
                "value": "personalization_storage",
                "displayValue": "Personalization storage"
              },
              {
                "value": "ad_user_data",
                "displayValue": "Ad user data"
              },
              {
                "value": "ad_personalization",
                "displayValue": "Ad personalization"
              },
              {
                "value": "analytics_storage",
                "displayValue": "Analytics storage"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "ad_storage_visibility",
                "paramValue": "hidden_synchronized",
                "type": "EQUALS"
              }
            ],
            "notSetText": "None",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "ad_storage_show_again_expiration",
            "displayName": "If the storage is denied show the modal again after",
            "simpleValueType": true,
            "defaultValue": 0,
            "enablingConditions": [
              {
                "paramName": "ad_storage_visibility",
                "paramValue": "visible_enabled",
                "type": "EQUALS"
              },
              {
                "paramName": "ad_storage_visibility",
                "paramValue": "visible_disabled",
                "type": "EQUALS"
              }
            ],
            "valueUnit": "days",
            "valueValidators": [
              {
                "type": "NON_NEGATIVE_NUMBER"
              }
            ],
            "help": "Set the value to 0 if you want to disable the feature."
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "ad_storage_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "68publishers_ad_storage",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "ad_user_data",
    "displayName": "Ad user data",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "ad_user_data_visibility",
        "displayName": "Visibility and default state",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "visible_enabled",
            "displayValue": "Visible, Enabled by default"
          },
          {
            "value": "visible_readonly_enabled",
            "displayValue": "Visible \u0026 Readonly, Enabled by default"
          },
          {
            "value": "visible_disabled",
            "displayValue": "Visible, Disabled by default"
          },
          {
            "value": "hidden_synchronized",
            "displayValue": "Hidden, Synchronized"
          },
          {
            "value": "hidden_disabled",
            "displayValue": "Hidden, Disabled always"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "visible_disabled",
        "subParams": [
          {
            "type": "SELECT",
            "name": "ad_user_data_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "functionality_storage",
                "displayValue": "Functionality storage"
              },
              {
                "value": "security_storage",
                "displayValue": "Security storage"
              },
              {
                "value": "personalization_storage",
                "displayValue": "Personalization storage"
              },
              {
                "value": "ad_storage",
                "displayValue": "Ad storage"
              },
              {
                "value": "ad_personalization",
                "displayValue": "Ad personalization"
              },
              {
                "value": "analytics_storage",
                "displayValue": "Analytics storage"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "ad_user_data_visibility",
                "paramValue": "hidden_synchronized",
                "type": "EQUALS"
              }
            ],
            "notSetText": "None",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "ad_user_data_show_again_expiration",
            "displayName": "If the storage is denied show the modal again after",
            "simpleValueType": true,
            "defaultValue": 0,
            "enablingConditions": [
              {
                "paramName": "ad_user_data_visibility",
                "paramValue": "visible_enabled",
                "type": "EQUALS"
              },
              {
                "paramName": "ad_user_data_visibility",
                "paramValue": "visible_disabled",
                "type": "EQUALS"
              }
            ],
            "valueUnit": "days",
            "valueValidators": [
              {
                "type": "NON_NEGATIVE_NUMBER"
              }
            ],
            "help": "Set the value to 0 if you want to disable the feature."
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "ad_user_data_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "68publishers_ad_user_data",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "ad_personalization",
    "displayName": "Ad personalization",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "ad_personalization_visibility",
        "displayName": "Visibility and default state",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "visible_enabled",
            "displayValue": "Visible, Enabled by default"
          },
          {
            "value": "visible_readonly_enabled",
            "displayValue": "Visible \u0026 Readonly, Enabled by default"
          },
          {
            "value": "visible_disabled",
            "displayValue": "Visible, Disabled by default"
          },
          {
            "value": "hidden_synchronized",
            "displayValue": "Hidden, Synchronized"
          },
          {
            "value": "hidden_disabled",
            "displayValue": "Hidden, Disabled always"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "visible_disabled",
        "subParams": [
          {
            "type": "SELECT",
            "name": "ad_personalization_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "functionality_storage",
                "displayValue": "Functionality storage"
              },
              {
                "value": "security_storage",
                "displayValue": "Security storage"
              },
              {
                "value": "personalization_storage",
                "displayValue": "Personalization storage"
              },
              {
                "value": "ad_storage",
                "displayValue": "Ad storage"
              },
              {
                "value": "ad_user_data",
                "displayValue": "Ad user data"
              },
              {
                "value": "analytics_storage",
                "displayValue": "Analytics storage"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "ad_personalization_visibility",
                "paramValue": "hidden_synchronized",
                "type": "EQUALS"
              }
            ],
            "notSetText": "None",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "ad_personalization_show_again_expiration",
            "displayName": "If the storage is denied show the modal again after",
            "simpleValueType": true,
            "defaultValue": 0,
            "enablingConditions": [
              {
                "paramName": "ad_personalization_visibility",
                "paramValue": "visible_enabled",
                "type": "EQUALS"
              },
              {
                "paramName": "ad_personalization_visibility",
                "paramValue": "visible_disabled",
                "type": "EQUALS"
              }
            ],
            "valueUnit": "days",
            "valueValidators": [
              {
                "type": "NON_NEGATIVE_NUMBER"
              }
            ],
            "help": "Set the value to 0 if you want to disable the feature."
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "ad_personalization_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "68publishers_ad_personalization",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "analytics_storage",
    "displayName": "Analytics storage",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "analytics_storage_visibility",
        "displayName": "Visibility and default state",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "visible_enabled",
            "displayValue": "Visible, Enabled by default"
          },
          {
            "value": "visible_readonly_enabled",
            "displayValue": "Visible \u0026 Readonly, Enabled by default"
          },
          {
            "value": "visible_disabled",
            "displayValue": "Visible, Disabled by default"
          },
          {
            "value": "hidden_synchronized",
            "displayValue": "Hidden, Synchronized"
          },
          {
            "value": "hidden_disabled",
            "displayValue": "Hidden, Disabled always"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "visible_disabled",
        "subParams": [
          {
            "type": "SELECT",
            "name": "analytics_storage_sync_consent_with",
            "displayName": "Synchronize consent with",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "functionality_storage",
                "displayValue": "Functionality storage"
              },
              {
                "value": "security_storage",
                "displayValue": "Security storage"
              },
              {
                "value": "personalization_storage",
                "displayValue": "Personalization storage"
              },
              {
                "value": "ad_storage",
                "displayValue": "Ad storage"
              },
              {
                "value": "ad_user_data",
                "displayValue": "Ad user data"
              },
              {
                "value": "ad_personalization",
                "displayValue": "Ad personalization"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "analytics_storage_visibility",
                "paramValue": "hidden_synchronized",
                "type": "EQUALS"
              }
            ],
            "notSetText": "None",
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "analytics_storage_show_again_expiration",
            "displayName": "If the storage is denied show the modal again after",
            "simpleValueType": true,
            "defaultValue": 0,
            "enablingConditions": [
              {
                "paramName": "analytics_storage_visibility",
                "paramValue": "visible_enabled",
                "type": "EQUALS"
              },
              {
                "paramName": "analytics_storage_visibility",
                "paramValue": "visible_disabled",
                "type": "EQUALS"
              }
            ],
            "valueUnit": "days",
            "valueValidators": [
              {
                "type": "NON_NEGATIVE_NUMBER"
              }
            ],
            "help": "Set the value to 0 if you want to disable the feature."
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "analytics_storage_event_trigger",
        "displayName": "Event trigger name",
        "simpleValueType": true,
        "defaultValue": "68publishers_analytics_storage",
        "help": "The name of a trigger that will be invoked on after a consent."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "composite_consent",
    "displayName": "Composite consent",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "PARAM_TABLE",
        "name": "composite_consent_event_triggers",
        "displayName": "Event triggers",
        "paramTableColumns": [
          {
            "param": {
              "type": "TEXT",
              "name": "name",
              "displayName": "Trigger name",
              "simpleValueType": true,
              "valueValidators": [
                {
                  "type": "NON_EMPTY"
                }
              ]
            },
            "isUnique": true
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "functionality_storage",
              "checkboxText": "Functionality storage",
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "security_storage",
              "checkboxText": "Security storage",
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "personalization_storage",
              "checkboxText": "Personalization storage",
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "ad_storage",
              "checkboxText": "Ad storage",
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "ad_user_data",
              "checkboxText": "Ad user data",
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "ad_personalization",
              "checkboxText": "Ad personalization",
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "CHECKBOX",
              "name": "analytics_storage",
              "checkboxText": "Analytics Storage",
              "simpleValueType": true
            },
            "isUnique": false
          }
        ],
        "help": "If you need to invoke some trigger only if the user makes consent with more storage types together then define the trigger here.",
        "newRowTitle": "New event trigger",
        "newRowButtonText": "Add event trigger",
        "editRowTitle": "Edit event trigger"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "translation_settings",
    "displayName": "Translation settings",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "locales",
        "displayName": "Locales",
        "simpleValueType": true,
        "defaultValue": "en",
        "textAsList": true,
        "lineCount": 4,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "help": "One per line."
      },
      {
        "type": "SELECT",
        "name": "locale_detection_strategy",
        "displayName": "Locale detection strategy",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "browser",
            "displayValue": "Browser"
          },
          {
            "value": "document",
            "displayValue": "Document"
          },
          {
            "value": "disabled",
            "displayValue": "Disabled"
          }
        ],
        "simpleValueType": true,
        "help": "\"Browser\" to get user\u0027s browser language or \"Document\" to read value from \u0026lt;html lang\u003d\"...\"\u0026gt; of current page.",
        "defaultValue": "document"
      },
      {
        "type": "TEXT",
        "name": "current_locale",
        "displayName": "Locale",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": []
          }
        ],
        "help": "You must define the website locale when the detection strategy is disabled. The locale must be one of the previously defined locales.",
        "enablingConditions": [
          {
            "paramName": "locale_detection_strategy",
            "paramValue": "disabled",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "PARAM_TABLE",
        "name": "translations",
        "displayName": "Translations",
        "paramTableColumns": [
          {
            "param": {
              "type": "TEXT",
              "name": "locale",
              "displayName": "Locale",
              "simpleValueType": true,
              "valueValidators": [
                {
                  "type": "NON_EMPTY"
                }
              ]
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "SELECT",
              "name": "key",
              "displayName": "Key",
              "macrosInSelect": false,
              "selectItems": [
                {
                  "value": "consent_modal_title",
                  "displayValue": "consent_modal_title"
                },
                {
                  "value": "consent_modal_description",
                  "displayValue": "consent_modal_description"
                },
                {
                  "value": "consent_modal_primary_btn",
                  "displayValue": "consent_modal_primary_btn"
                },
                {
                  "value": "settings_modal_title",
                  "displayValue": "settings_modal_title"
                },
                {
                  "value": "settings_modal_save_settings_btn",
                  "displayValue": "settings_modal_save_settings_btn"
                },
                {
                  "value": "settings_modal_accept_all_btn",
                  "displayValue": "settings_modal_accept_all_btn"
                },
                {
                  "value": "settings_modal_reject_all_btn",
                  "displayValue": "settings_modal_reject_all_btn"
                },
                {
                  "value": "settings_modal_close_btn_label",
                  "displayValue": "settings_modal_close_btn_label"
                },
                {
                  "value": "settings_modal_before_consent_title",
                  "displayValue": "settings_modal_before_consent_title"
                },
                {
                  "value": "settings_modal_before_consent_description",
                  "displayValue": "settings_modal_before_consent_description"
                },
                {
                  "value": "settings_modal_after_consent_title",
                  "displayValue": "settings_modal_after_consent_title"
                },
                {
                  "value": "settings_modal_after_consent_description",
                  "displayValue": "settings_modal_after_consent_description"
                },
                {
                  "value": "functionality_storage_title",
                  "displayValue": "functionality_storage_title"
                },
                {
                  "value": "functionality_storage_description",
                  "displayValue": "functionality_storage_description"
                },
                {
                  "value": "personalization_storage_title",
                  "displayValue": "personalization_storage_title"
                },
                {
                  "value": "personalization_storage_description",
                  "displayValue": "personalization_storage_description"
                },
                {
                  "value": "security_storage_title",
                  "displayValue": "security_storage_title"
                },
                {
                  "value": "security_storage_description",
                  "displayValue": "security_storage_description"
                },
                {
                  "value": "ad_storage_title",
                  "displayValue": "ad_storage_title"
                },
                {
                  "value": "ad_storage_description",
                  "displayValue": "ad_storage_description"
                },
                {
                  "value": "analytics_storage_title",
                  "displayValue": "analytics_storage_title"
                },
                {
                  "value": "analytics_storage_description",
                  "displayValue": "analytics_storage_description"
                },
                {
                  "value": "consent_modal_revision_message",
                  "displayValue": "consent_modal_revision_message"
                },
                {
                  "value": "modal_trigger_title",
                  "displayValue": "modal_trigger_title"
                },
                {
                  "value": "consent_modal_secondary_btn_settings",
                  "displayValue": "consent_modal_secondary_btn_settings"
                },
                {
                  "value": "consent_modal_secondary_btn_accept_necessary",
                  "displayValue": "consent_modal_secondary_btn_accept_necessary"
                },
                {
                  "value": "cookie_table_col_name",
                  "displayValue": "cookie_table_col_name"
                },
                {
                  "value": "cookie_table_col_purpose",
                  "displayValue": "cookie_table_col_purpose"
                },
                {
                  "value": "cookie_table_col_processing_time",
                  "displayValue": "cookie_table_col_processing_time"
                },
                {
                  "value": "cookie_table_col_provider",
                  "displayValue": "cookie_table_col_provider"
                },
                {
                  "value": "cookie_table_col_type",
                  "displayValue": "cookie_table_col_type"
                },
                {
                  "value": "cookie_table_col_link",
                  "displayValue": "cookie_table_col_link"
                },
                {
                  "value": "cookie_table_col_link_find_out_more",
                  "displayValue": "cookie_table_col_link_find_out_more"
                },
                {
                  "value": "cookie_table_col_category",
                  "displayValue": "cookie_table_col_category"
                },
                {
                  "value": "processing_time_session",
                  "displayValue": "processing_time_session"
                },
                {
                  "value": "processing_time_persistent",
                  "displayValue": "processing_time_persistent"
                },
                {
                  "value": "cookie_type_1st_party",
                  "displayValue": "cookie_type_1st_party"
                },
                {
                  "value": "cookie_type_3rd_party",
                  "displayValue": "cookie_type_3rd_party"
                },
                {
                  "value": "find_out_more",
                  "displayValue": "find_out_more"
                },
                {
                  "value": "ad_user_data_title",
                  "displayValue": "ad_user_data_title"
                },
                {
                  "value": "ad_user_data_description",
                  "displayValue": "ad_user_data_description"
                },
                {
                  "value": "ad_personalization_title",
                  "displayValue": "ad_personalization_title"
                },
                {
                  "value": "ad_personalization_description",
                  "displayValue": "ad_personalization_description"
                }
              ],
              "simpleValueType": true
            },
            "isUnique": false
          },
          {
            "param": {
              "type": "TEXT",
              "name": "value",
              "displayName": "Translation",
              "simpleValueType": true,
              "lineCount": 2
            },
            "isUnique": false
          }
        ],
        "help": "Here you can rewrite default translations that are defined inside the widget.",
        "newRowButtonText": "Add translation",
        "editRowTitle": "Edit translation",
        "newRowTitle": "New translation"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "floating_btn_settings",
    "displayName": "Floating button settings",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "show_floating_btn",
        "checkboxText": "Show floating button?",
        "simpleValueType": true,
        "defaultValue": false
      },
      {
        "type": "SELECT",
        "name": "floating_btn_pos",
        "displayName": "Floating position",
        "macrosInSelect": true,
        "selectItems": [
          {
            "value": "left",
            "displayValue": "Left"
          },
          {
            "value": "right",
            "displayValue": "Right"
          }
        ],
        "simpleValueType": true
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "stylesheets_group",
    "displayName": "Stylesheets",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "include_default_stylesheets",
        "checkboxText": "Include default stylesheets",
        "simpleValueType": true,
        "defaultValue": true
      },
      {
        "type": "TEXT",
        "name": "external_stylesheets",
        "displayName": "External stylesheets",
        "simpleValueType": true,
        "textAsList": true,
        "lineCount": 2,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#\u003d]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?\u0026//\u003d]*)"
            ]
          }
        ],
        "help": "One URL per line."
      },
      {
        "type": "TEXT",
        "name": "internal_stylesheets",
        "displayName": "Internal stylesheet",
        "simpleValueType": true,
        "help": "CSS rules without \u0026lt;style\u0026gt;\u0026lt;/style\u0026gt; tags.",
        "lineCount": 2
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "scripts_group",
    "displayName": "Page scripts",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "page_scripts",
        "checkboxText": "Manage page scripts",
        "simpleValueType": true,
        "defaultValue": false,
        "help": "Enable if you want to easily manage existing \u0026lt;script\u0026gt; tags."
      },
      {
        "type": "TEXT",
        "name": "script_selector",
        "displayName": "Script selector",
        "simpleValueType": true,
        "defaultValue": "data-cookiecategory",
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^data-.+$"
            ]
          }
        ],
        "enablingConditions": [
          {
            "paramName": "page_scripts",
            "paramValue": true,
            "type": "EQUALS"
          }
        ],
        "help": "The name of a data attribute that is used for managed \u0026lt;script\u0026gt; tags."
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "integration",
    "displayName": "Integration",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "GROUP",
        "name": "user",
        "displayName": "User",
        "groupStyle": "ZIPPY_OPEN",
        "subParams": [
          {
            "type": "SELECT",
            "name": "user_identity",
            "displayName": "Identity",
            "macrosInSelect": true,
            "selectItems": [
              {
                "value": "default",
                "displayValue": "Generated UUID"
              }
            ],
            "simpleValueType": true,
            "help": "Identities for users are by default automatically generated UUIDs that are stored in a browser\u0027s local storage. You can set a custom variable from the container, but the default strategy will be used anyway if the variable contains an empty value.",
            "defaultValue": "default"
          },
          {
            "type": "PARAM_TABLE",
            "name": "user_attributes",
            "displayName": "Attributes",
            "paramTableColumns": [
              {
                "param": {
                  "type": "TEXT",
                  "name": "name",
                  "displayName": "Name",
                  "simpleValueType": true
                },
                "isUnique": true
              },
              {
                "param": {
                  "type": "TEXT",
                  "name": "value",
                  "displayName": "Value",
                  "simpleValueType": true
                },
                "isUnique": false
              }
            ]
          }
        ]
      },
      {
        "type": "GROUP",
        "name": "cmp_api",
        "displayName": "CMP API",
        "groupStyle": "ZIPPY_OPEN",
        "subParams": [
          {
            "type": "CHECKBOX",
            "name": "cmp_api_enabled",
            "checkboxText": "Enabled",
            "simpleValueType": true,
            "defaultValue": false
          },
          {
            "type": "TEXT",
            "name": "cmp_api_host",
            "displayName": "URL",
            "simpleValueType": true,
            "help": "The URL of your CMP application, just hostname like \"https://www.domain.com\" without path, etc.",
            "enablingConditions": [
              {
                "paramName": "cmp_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "SELECT",
            "name": "cmp_api_version",
            "displayName": "API Version",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": 1,
                "displayValue": "v1"
              }
            ],
            "simpleValueType": true,
            "defaultValue": 1,
            "enablingConditions": [
              {
                "paramName": "cmp_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "cmp_api_project",
            "displayName": "Project code (optional)",
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "cmp_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "The website domain will be used as the project code if the field is not filled."
          },
          {
            "type": "CHECKBOX",
            "name": "cmp_api_default_environment",
            "checkboxText": "Default environment",
            "simpleValueType": true,
            "defaultValue": true,
            "enablingConditions": [
              {
                "paramName": "cmp_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "cmp_api_environment_code",
            "displayName": "Environment code",
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "cmp_api_default_environment",
                "paramValue": false,
                "type": "EQUALS"
              }
            ],
            "help": "Environment code from the CMP. A GTM variable that returns string or null (default environment) can be used.",
            "valueValidators": [
              {
                "type": "NON_EMPTY",
                "enablingConditions": [
                  {
                    "paramName": "cmp_api_default_environment",
                    "paramValue": false,
                    "type": "EQUALS"
                  }
                ]
              }
            ]
          },
          {
            "type": "CHECKBOX",
            "name": "cmp_api_consent_api_enabled",
            "checkboxText": "Consent API enabled",
            "simpleValueType": true,
            "defaultValue": true,
            "enablingConditions": [
              {
                "paramName": "cmp_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "Consents are sent into the CMP is the option is checked."
          },
          {
            "type": "CHECKBOX",
            "name": "cmp_api_cookies_api_enabled",
            "checkboxText": "Cookies API enabled",
            "simpleValueType": true,
            "defaultValue": true,
            "enablingConditions": [
              {
                "paramName": "cmp_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "Cookie tables in the widget are automatically created if the option is checked."
          },
          {
            "type": "SIMPLE_TABLE",
            "name": "cmp_api_cookie_table_headers",
            "displayName": "Cookie table headers",
            "simpleTableColumns": [
              {
                "defaultValue": "",
                "displayName": "",
                "name": "name",
                "type": "SELECT",
                "selectItems": [
                  {
                    "value": "purpose",
                    "displayValue": "Description"
                  },
                  {
                    "value": "processing_time",
                    "displayValue": "Expiration"
                  },
                  {
                    "value": "type",
                    "displayValue": "Type (1st party or 3rd party)"
                  },
                  {
                    "value": "link",
                    "displayValue": "Link"
                  },
                  {
                    "value": "link_find_out_more",
                    "displayValue": "Link (find out more)"
                  },
                  {
                    "value": "provider",
                    "displayValue": "Provider"
                  },
                  {
                    "value": "category",
                    "displayValue": "Category"
                  }
                ]
              }
            ],
            "enablingConditions": [
              {
                "paramName": "cmp_api_cookies_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "LABEL",
            "name": "cmp_api_cookie_table_headers_label",
            "displayName": "Header \"name\" is always automatically as first so it\u0027s not user-defined.",
            "enablingConditions": [
              {
                "paramName": "cmp_api_cookies_api_enabled",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          }
        ]
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

/**
 * Cookie Consent
 * Developed by '68 Publishers s.r.o. · http://68publishers.io
 * See documentation at https://github.com/68publishers/cookie-consent
 */
const log = require('logToConsole');
const setDefaultConsentState = require('setDefaultConsentState');
const createArgumentsQueue = require('createArgumentsQueue');
const queryPermission = require('queryPermission');
const getCookieValues = require('getCookieValues');
const injectScript = require('injectScript');
const setInWindow = require('setInWindow');
const callInWindow = require('callInWindow');
const JSON = require('JSON');
const Object = require('Object');
const makeInteger = require('makeInteger');

// create gtag
const gtag = createArgumentsQueue('gtag', 'dataLayer');

// create temporary wrapper in the window
const temporaryWrapper = (function () {
  const events = [];

  return {
    on: function (event, callback, scope) {
      events.push([event, callback, scope || null]);

      return function () {
      };
    },
    getEvents: function () {
      return events;
    }
  };
})();

setInWindow('CookieConsentWrapper', temporaryWrapper, false);

// parse consents from cookies, values are automatically decoded using decodeURIComponent function if the second argument is true
let consentCookie = getCookieValues(data.cookie_name, true)[0] || null;

if (null !== consentCookie) {
  consentCookie = JSON.parse(consentCookie);
  consentCookie = consentCookie && consentCookie.hasOwnProperty('categories') && consentCookie.categories.length ? consentCookie.categories : [];
}

// build storage pool & event triggers
const storagePool = {};
const eventTriggers = {};
const storageNames = ['functionality_storage', 'security_storage', 'personalization_storage', 'ad_storage', 'ad_user_data', 'ad_personalization', 'analytics_storage'];

const VisibilityMap = {
  visibleEnabled: 'visible_enabled',
  visibleReadonlyEnabled: 'visible_readonly_enabled',
  visibleDisabled: 'visible_disabled',
  hiddenSynchronized: 'hidden_synchronized',
  hiddenDisabled: 'hidden_disabled',
};

const VisibilityResolver = {
  isEnabledByDefault: v => {
    return -1 !== [VisibilityMap.visibleEnabled, VisibilityMap.visibleReadonlyEnabled].indexOf(v);
  },
  isDisplayInWidget: v => {
    return -1 !== [VisibilityMap.visibleEnabled, VisibilityMap.visibleReadonlyEnabled, VisibilityMap.visibleDisabled].indexOf(v);
  },
  isReadonly: v => {
    return VisibilityMap.visibleReadonlyEnabled === v;
  },
  canSynchronizeConsent: v => {
    return VisibilityMap.hiddenSynchronized === v;
  },
  canShowModalAgain: v => {
    return -1 !== [VisibilityMap.visibleEnabled, VisibilityMap.visibleDisabled].indexOf(v);
  },
};

for (let key in storageNames) {
  const storageName = storageNames[key];
  const visibility = data[storageName + '_visibility'];
  const eventTriggerName = data[storageName + '_event_trigger'];
  const syncConsentWith = VisibilityResolver.canSynchronizeConsent(visibility) ? data[storageName + '_sync_consent_with'] : undefined;
  const showModalAgainExpiration = VisibilityResolver.canShowModalAgain(visibility) ? data[storageName + '_show_again_expiration'] : undefined;

  // build storage config
  const storage = {
    name: storageName,
    enabled_by_default: VisibilityResolver.isEnabledByDefault(visibility),
    display_in_widget: VisibilityResolver.isDisplayInWidget(visibility),
    readonly: VisibilityResolver.isReadonly(visibility),
  };

  if (syncConsentWith) {
    storage.sync_consent_with = syncConsentWith;
  }

  if (showModalAgainExpiration) {
    storage.show_modal_again_expiration = makeInteger(showModalAgainExpiration);
  }

  // push into the pool
  storagePool[storage.name] = storage;


  // push new trigger or update existing
  if (eventTriggerName && '' !== eventTriggerName) {
    if (eventTriggers.hasOwnProperty(eventTriggerName)) {
      eventTriggers[eventTriggerName].storage_names.push(storage.name);
    } else {
      eventTriggers[eventTriggerName] = {
        name: eventTriggerName,
        storage_names: [storage.name],
        type: 'or'
      };
    }
  }
}

// process composite triggers
for (let key in data.composite_consent_event_triggers || []) {
  const compositeEventTrigger = data.composite_consent_event_triggers[key];

  // check duplicated trigger name
  if (eventTriggers.hasOwnProperty(compositeEventTrigger.name)) {
    data.gtmOnFailure();

    continue;
  }

  // get array of storage names that are needed for triggering of an event
  const compositeEventTriggerStorageNames = [];

  for (let storageKey in storageNames) {
    const storageName = storageNames[storageKey];

    if (compositeEventTrigger.hasOwnProperty(storageName) && compositeEventTrigger[storageName]) {
      compositeEventTriggerStorageNames.push(storageName);
    }
  }

  // append new composite trigger
  if (0 < compositeEventTriggerStorageNames.length) {
    eventTriggers[compositeEventTrigger.name] = {
      name: compositeEventTrigger.name,
      storage_names: compositeEventTriggerStorageNames,
      type: 'and'
    };
  }
}

const defaultConsents = {};
const acceptedStorageNames = [];

// setup default consent & invoke event triggers for accepted storages
for (let key in storagePool) {
  const storage = storagePool[key];

  let defaultStorageConsent = ((null === consentCookie && storage.enabled_by_default) || (null !== consentCookie && -1 !== consentCookie.indexOf(storage.name))) ? 'granted' : 'denied';


  // if consent is denied then check "sync_consent_with" property
  if ('denied' === defaultStorageConsent && storage.hasOwnProperty('sync_consent_with') && storagePool.hasOwnProperty(storage.sync_consent_with)) {
    const delegatedStorage = storagePool[storage.sync_consent_with];

    defaultStorageConsent = ((null === consentCookie && delegatedStorage.enabled_by_default) || (null !== consentCookie && -1 !== consentCookie.indexOf(delegatedStorage.name))) ? 'granted' : 'denied';

  }

  defaultConsents[storage.name] = defaultStorageConsent;

  if ('granted' === defaultStorageConsent) {
    acceptedStorageNames.push(storage.name);
  }
}

// setup default consents
setDefaultConsentState(defaultConsents);

// fire event triggers for granted consents
for (let eventTriggerKey in eventTriggers) {
  const eventTrigger = eventTriggers[eventTriggerKey];
  let invoke = false;

  // check needed consents
  for (let storageKey in eventTrigger.storage_names) {
    invoke = -1 !== acceptedStorageNames.indexOf(eventTrigger.storage_names[storageKey]);

    if ((invoke && 'or' === eventTrigger.type) || (!invoke && 'and' === eventTrigger.type)) {
      break;
    }
  }

  // fire a trigger and remove the trigger from widget's triggers
  if (invoke) {
    gtag('event', eventTrigger.name, {});
    Object.delete(eventTriggers, eventTriggerKey);

  }
}

// build custom translations
const translationsData = data.translations || [];
const translations = {};
let translationKey;
let translation;

 
for (translationKey in translationsData) {
  translation = translationsData[translationKey];

  if (!translations.hasOwnProperty(translation.locale)) {
    translations[translation.locale] = {};
  }

  translations[translation.locale][translation.key] = translation.value;
}

// build user attributes
const userAttributesData = data.user_attributes || [];
const userAttributes = {};
let userAttributeKey;
let userAttribute;

for (userAttributeKey in userAttributesData) {
  userAttribute = userAttributesData[userAttributeKey];
  userAttributes[userAttribute.name] = userAttribute.value;
}

// create plugin options
const pluginOptions = {
  force_consent: data.force_consent,
  autorun: data.autorun,
  hide_from_bots: data.hide_from_bots,
  cookie_name: data.cookie_name,
  cookie_expiration: makeInteger(data.cookie_expiration),
  revision: makeInteger(data.revision),
  delay: makeInteger(data.delay),
  auto_language: 'disabled' !== data.locale_detection_strategy ? data.locale_detection_strategy : null,
  page_scripts: data.page_scripts,
  use_rfc_cookie: data.use_rfc_cookie
};

if (data.hasOwnProperty('current_locale')) {
  pluginOptions.current_lang = data.current_locale;
}

if (data.hasOwnProperty('script_selector')) {
  pluginOptions.script_selector = data.script_selector;
}

if (data.hasOwnProperty('cookie_domain') && '' !== data.cookie_domain) {
  pluginOptions.cookie_domain = data.cookie_domain;
}

// create auto-clear options
const autoClearOptions = {
  enabled: data.auto_clear_enabled
};

if (data.auto_clear_enabled) {
  autoClearOptions.strategy = data.auto_clear_strategy;
  autoClearOptions.cookie_names = data.auto_clear_cookie_names || [];
}

const cookieTableHeaders = [];

if (data.cmp_api_enabled && data.cmp_api_cookies_api_enabled) {
  cookieTableHeaders.push('name');

  for (let i in data.cmp_api_cookie_table_headers) {
    cookieTableHeaders.push(data.cmp_api_cookie_table_headers[i].name);
  }
}

// setup wrapper config
setInWindow('cc_wrapper_config', {
  plugin_options: pluginOptions,
  auto_clear_options: autoClearOptions,

  consent_modal_options: {
    layout: data.consent_modal_layout,
    position: data.consent_modal_position,
    transition: data.consent_modal_transition,
    primary_button_role: data.consent_modal_primary_button_role,
    secondary_button_role: data.consent_modal_secondary_button_role,
    swap_buttons: 'secondary_primary' === data.consent_modal_buttons_order,
    show_third_button: data.consent_modal_show_third_button
  },

  settings_modal_options: {
    layout: data.settings_modal_layout,
    position: data.settings_modal_position,
    transition: data.settings_modal_transition,
    modal_trigger_selector: data.modal_trigger_selector || undefined
  },

  ui_options: {
    include_default_stylesheets: data.include_default_stylesheets,
    external_stylesheets: data.external_stylesheets || [],
    internal_stylesheets: data.hasOwnProperty('internal_stylesheets') ? [data.internal_stylesheets] : [],
    show_floating_button: data.show_floating_btn,
    floating_button_position: data.floating_btn_pos || 'left'
    
  },

  user_options: {
    identity: 'default' !== data.user_identity ? data.user_identity : null,
    attributes: userAttributes
  },

  cmp_api_options: {
    url: data.cmp_api_enabled ? data.cmp_api_host : null,
    project: data.cmp_api_enabled && data.cmp_api_project ? data.cmp_api_project : null,
    version: data.cmp_api_enabled ? data.cmp_api_version : 1,
    environment: data.cmp_api_enabled ? (data.cmp_api_default_environment ? 'default' : data.cmp_api_environment_code) : null,
    consent_api_enabled: data.cmp_api_enabled ? data.cmp_api_consent_api_enabled : false,
    cookies_api_enabled: data.cmp_api_enabled ? data.cmp_api_cookies_api_enabled : false,
    cookie_table_headers: cookieTableHeaders
  },

  storage_pool: Object.values(storagePool),
  event_triggers: Object.values(eventTriggers),
  locales: data.locales,
  translations: translations
}, true);

// inject cookie consent wrapper
const packageVersion = 'latest' === data.package_version ? '' : '@' + data.package_version;
const cookieConsentWrapperScript = 'https://unpkg.com/stenm-cookie-consent' + packageVersion + '/dist/cookie-consent.min.js';

if (queryPermission('inject_script', cookieConsentWrapperScript)) {
  injectScript(cookieConsentWrapperScript, function () {
    const events = temporaryWrapper.getEvents();
    let event;
    let eventKey;

    for (eventKey in events) {
      event = events[eventKey];
      callInWindow('CookieConsentWrapper.on', event[0], event[1], event[2]);
    }

    data.gtmOnSuccess();
  }, data.gtmOnFailure);
} else {
  data.gtmOnFailure();
}

data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "wait_for_update"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://unpkg.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gtag"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "cc_wrapper_config"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CookieConsentWrapper"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "CookieConsentWrapper.on"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []
setup: ''


___NOTES___

Created on 17. 12. 2021 0:22:20


